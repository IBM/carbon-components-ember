function e(e){if(!e)throw new Error("Cannot call dataFrom with no event");if(!(e.currentTarget instanceof HTMLFormElement))throw new Error("Cannot pass dataFrom an object where the currentTarget property's value is not a form");const t=e.currentTarget,r=new FormData(t,e.submitter),a=Object.fromEntries(r.entries());for(const u of t.elements){const e=u.getAttribute("name");if(!e)continue;const r=e in a;if(r||u instanceof HTMLButtonElement||(a[e]=null),u instanceof HTMLSelectElement)a[u.name]=n(u);else if(u instanceof HTMLButtonElement&&r)a[u.name]=u.value||null;else if(u instanceof HTMLInputElement){const n=t.querySelectorAll(`[name="${e}"]`),r=Array.from(n);if(!r.every((e=>e instanceof HTMLInputElement)))throw new Error(`Every element with name ${e} must be an input`);const o=r.length>1;switch(u.type){case"number":case"range":a[u.name]=isNaN(u.valueAsNumber)?null:u.valueAsNumber;break;case"date":a[u.name]=u.valueAsDate;break;case"datetime-local":a[u.name]=isNaN(u.valueAsNumber)?null:new Date(u.valueAsNumber);break;case"checkbox":a[u.name]=o?r.filter((e=>e.checked)).map((e=>l(e))):l(u);break;case"radio":{let e;e=o?r.find((e=>e.checked)):u,a[u.name]=e?l(e):null;break}case"file":u.files&&u.files.length>0?a[u.name]=u.multiple?Array.from(u.files):u.files[0]||null:a[u.name]=u.multiple?[]:null}}}return a}function n(e){return e.multiple?function(e){if(-1===e.selectedIndex)return[];let n=[];for(let l of e.options)!l.disabled&&l.selected&&""!==l.value&&n.push(t(l));return n}(e):function(e){if(-1===e.selectedIndex)return null;let n=null;for(let l of e.options)!l.disabled&&l.selected&&(n=t(l));return n}(e)}function t(e){if(!e.disabled&&e.selected)return""===e.value?null:o(e)||e.value}function l(e){if(!e.disabled)return null!==e.getAttribute("value")||o(e)?e.checked?o(e)||e.value:null:o(e)||e.checked}const r=new WeakMap;function a(e,n){r.set(e,n)}function u(e){return r.delete(e)}function o(e){return r.get(e)}export{e as dataFrom,u as deleteValue,a as setValue};
