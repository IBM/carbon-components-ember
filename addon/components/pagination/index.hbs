{{import Select from '../select'}}
{{import Icon from '../icon'}}
{{import defaultTo from 'carbon-components-ember/helpers/default-to'}}
{{import set from 'carbon-components-ember/helpers/set'}}
{{import range from 'ember-composable-helpers/helpers/range'}}
{{import eq from 'ember-truth-helpers/helpers/equal'}}
{{import styles from './styles.scoped.scss'}}

<div class="cds--pagination {{styles.namespace}} {{if @isLoading 'cds--skeleton'}}" data-pagination
  {{did-insert this.pageChanged}}
  {{did-update (fn this.setState @state) @state}}
>
  {{#if @isLoading}}
    <div class="cds--skeleton__text"></div>
  {{else}}
    <div class="cds--pagination__left">
      <label id="select-id-pagination-count-label" class="cds--pagination__text" for="select-id-pagination-count">
        Items per page:
      </label>
      <div class="cds--select cds--select--inline cds--select__item-count">
        <Select @disabled={{@disabled}} @searchEnabled={{false}} @options={{defaultTo (array 10 20 30 40 50 100) this.args.itemsPerPageOptions}} @onSelect={{this.setItemsPerPage}} @selected={{this.itemsPerPage}}/>
      </div>
      <span class="cds--pagination__text">
      <span data-displayed-item-range>{{this.currentSlice.start}} - {{this.currentSlice.end}}</span> of
      <span data-total-items>
        {{this.args.length}}
      </span> items
    </span>
    </div>
    <div class="cds--pagination__right">
      <Select @disabled={{@disabled}} @searchEnabled={{false}} @options={{range 1 this.pages true}} @onSelect={{this.setCurrentPage}} @selected={{this.currentPage}}/>
      <label id="select-id-pagination-page-label" class="cds--pagination__text" for="select-id-pagination-page">
        {{this.currentPage}} of {{this.pages}} pages
      </label>
      <button disabled={{or (eq this.currentPage 1) @disabled}} {{on 'click' this.pageBack}} class="cds--btn--icon-only cds--pagination__button cds--pagination__button--backward cds--btn cds--btn--md cds--btn--ghost" tabindex="0" data-page-backward aria-label="previous page">
        <Icon class="cds--pagination__nav-arrow" @icon="chevron--left" />
      </button>
      <button disabled={{or (eq this.currentPage this.pages) @disabled}} {{on 'click' this.pageForward}} class="cds--btn--icon-only cds--pagination__button cds--pagination__button--forward cds--btn cds--btn--md cds--btn--ghost" tabindex="0" data-page-forward aria-label="next page">
        <Icon class="cds--pagination__nav-arrow" @icon="chevron--right" />
      </button>
    </div>
  {{/if}}
</div>
